# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура

![Схема UML](https://github.com/elizavetaa0/web-larek-frontend/blob/main/src/images/web-larek.drawio.png)

## Описание проекта

При разработке проекта использовался паттерн MVP. Проект состоит из трех основных частей - Model, View, Presenter.

Model - отвечает за обработку данных и бизнес-логику, к ее функциям относятся методы по получению, обновлению и удалению данных.

View - отвечает за отображение данных или элементов интерефейса. К функциям можно отнести - отображение полученных с сервера данных, нажатие на кнопку или обработка нажатий кнопок, ввод текста, а также отправка запросов на сервер, валидация форм ввода.

Presenter - посредник между моделью и представлением. Он отвечает за обработку событий. В проекте представлен классом EventEmmitter.

Взаимодействие между частями архитектуры происходит следующим образом:

Представление отправляет запросы на получение данных или выполнение операций пользователю через презентера.  
Презентер обрабатывает запросы, взаимодействует с моделью для получения или обновления данных и передает их обратно представлению для отображения.  
При изменении данных в модели, презентер уведомляет представление об этом, чтобы оно могло обновить свое состояние.

Процессы в приложении реализованы с помощью событийно-ориентированного подхода, т.к вводится посредник - презентер для подписки на соверщаемые события и оповещения всех подписчиков об изменениях.

## Описание данных

## ICatalogue и ICatalogueProduct

Назначение: Интерфейс ICatalogue предназначен для представления каталога товаров, полученного от сервера. Он содержит информацию об общем количестве товаров в каталоге и массив объектов ICatalogueProduct, представляющих собой конкретные товары.

Хранение данных: Используется для хранения данных о каталоге товаров, предоставляя удобный доступ к информации о каждом товаре.

Использование: Используется на главной странице приложения для отображения списка товаров.

## IPayment

Назначение: Интерфейс IPayment описывает структуру данных для представления способа оплаты и адреса доставки.

Хранение данных: Используется для хранения информации, введенной пользователем при выборе способа оплаты и вводе адреса доставки.

Использование: Применяется при оформлении заказа, где покупатель выбирает способ оплаты и вводит адрес доставки.

## IOrderForm и IOrder

Назначение: Интерфейс IOrderForm предназначен для описания формы заказа, с возможностью ввода электронной почты и номера телефона заказчика. Интерфейс IOrder расширяет IOrderForm, добавляя к нему массив идентификаторов заказанных товаров.

Хранение данных: IOrderForm используется для временного хранения данных формы заказа перед отправкой на сервер. IOrder используется для представления заказа с полной информацией, готового для отправки на сервер.

Использование: Применяется на этапе формирования заказа, когда покупатель вводит свои контактные данные.

## FormErrors

Назначение: Тип FormErrors предназначен для описания ошибок валидации формы ввода.

Хранение данных: Используется для хранения сообщений об ошибках валидации для каждого поля формы.

Использование: Применяется в процессе валидации данных формы, чтобы сообщить пользователю об ошибках ввода.

## IOrderResult

Назначение: Интерфейс IOrderResult описывает структуру данных, представляющую результат успешного оформления заказа с уникальным идентификатором и общей суммой покупки.

Хранение данных: Используется для хранения информации о успешно оформленном заказе.

Использование: Применяется для предоставления клиенту информации о результате успешного оформления заказа.

## Базовый код

### Класс EventEmitter

Представляет собой паттерн "Наблюдатель". Данный класс позволяет подписываться на события и сообщать подписчикам о наступлении события.

Класс имеет методы on, off, emit, reset, bindElement.

Метод on используется для подписки на событие. Метод off - для отписки от события, а метод emit - для уведомления о наступлении события.

Метод reset применяется для сброса состояния эмиттера, и метод bindElement применяется для привязки к другому эмиттеру.

### Класс HTMLCustomItem

Представляет собой низкоуровневое API для работы с HTML элементами. 

В данном классе переопределяются методы из класса EventEmitter - on, off, emit, reset, bindElement. Это необходимо для ограничения событий, с которыми может работать конкретный элемент.

Также в класс добавляются другие методы необходимые для работы с элементами. К таким методам относят, например, методы setText - устанавливает текст, setLink - устанавливает ссылку, setValue - устанавливает значение. Также используются методы по работе с классами элемента - добавление, удаление и переключение. 

В классе присутствует метод render, который используется для отрисовки элемента. Также используются методы для отображения элемента - hide/show/remove.

Помимо описанных методов, в классе присутствует метод проверки валидности элемента - isValid, geyValidationMessage.

### Класс View

От данного класса наследуются компоненты, в нем прописывается полная типизация данных.

Метод select используется для выбора любого произвольного DOM элемента. 

Метод assign позволяет устанавливать данные в любой компонент. Метод copy позволяет скопировать любой элемент.

Метод bem используется для получения элемента и модификатора, чтобы вернуть нам итоговое имя класса для работы с элементами по БЭМ.
Метод toggle позволяет переключать модификаторы, не зная имя блока. Метод setVisibleContent позволяет  установить видимость контента.

И также в данном классе присутствуют методя для инициализации компонентов -  factory, clone, mount.

### Класс API

Данный класс используется для получения и отправки данных на сервер.

В классе используются стандартные методы для получения данных - get, для отправки данных - post.

## Компоненты модели данных (бизнес-логика)

### Класс CatalogueData

Назначение: Хранение информации о каталоге товаров и его состоянии.

Свойства:
items: ICatalogueProduct[] - массив объектов, представляющих товары в каталоге.
total: number - общее количество товаров в каталоге.
selectedItem: ICatalogueProduct | null - текущий выбранный товар для отображения подробной информации.

Методы:
getCatalogueItems(): ICatalogueProduct[] - возвращает массив товаров из каталога.
getTotalItemsCount(): number - возвращает общее количество товаров в каталоге.
selectItem(itemId: string): void - выбирает товар для отображения подробной информации.

### Класс CartData 

Назначение: Хранение информации о корзине пользователя и управление товарами в корзине.

Свойства:
items: ICartItem[] - массив объектов, представляющих товары в корзине.
totalPrice: number - общая стоимость товаров в корзине.

Методы:
getCartItems(): ICartItem[] - возвращает массив товаров из корзины.
getTotalPrice(): number - возвращает общую стоимость товаров в корзине.
addItemToCart(item: ICatalogueProduct): void - добавляет товар в корзину.
removeItemFromCart(itemId: string): void - удаляет товар из корзины.

### Класс OrderData

Назначение: Хранение информации о заказе пользователя и управление процессом оформления заказа.

Свойства:
orderForm: IOrderForm - объект, представляющий данные заказчика (электронная почта, телефон).
selectedItems: string[] - массив идентификаторов выбранных товаров для заказа.
paymentDetails: IPayment | null - объект, представляющий данные о способе оплаты и адресе доставки.

Методы:
getOrderForm(): IOrderForm - возвращает данные заказчика.
getSelectedItems(): string[] - возвращает массив идентификаторов выбранных товаров.
setOrderForm(formData: IOrderForm): void - устанавливает данные заказчика.
selectItems(items: string[]): void - выбирает товары для заказа.
setPaymentDetails(paymentInfo: IPayment): void - устанавливает данные о способе оплаты и адресе доставки.

## Компоненты представления

### Класс Catalogue

Назначение: Отображение каталога товаров.

Свойства:
catalogueData: ICatalogue - данные о продуктах.
onProductClick: (productId: string) => void - обработчик клика по продукту.

Методы:
render(): void - отображение каталога.

### Класс ProductDetails

Назначение: Отображение подробной информации о продукте.

Свойства:
productData: ICatalogueProduct - данные о продукте.

Методы:
render(): void - отображение подробной информации о продукте.
onAddToCartClick: () => void - обработчик добавления товара в корзину.

### Класс Cart

Назначение: Отображение содержимого корзины.

Свойства:
cartItems: ICartItem[] - данные о товарах в корзине.
onCheckoutClick: () => void - обработчик оформления заказа.

Методы:
render(): void - отображение содержимого корзины.

### Класс OrderForm

Назначение: Форма ввода данных для оформления заказа.

Свойства:
onSubmit: (orderFormData: IOrderForm) => void - обработчик отправки формы.

Методы:
render(): void - отображение формы ввода данных.

### Класс Modal

Общий класс для модальных окон. Включает в себя методы для открытия show() и закрытия модального окна close().

### Класс Button

Класс Button представляет собой общую кнопку с атрибутом для текста и методом click().



